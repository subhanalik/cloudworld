this is the fix code for bug1 branch

